---
phase: 00-foundation-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - wxt.config.ts
  - tsconfig.json
  - .gitignore
  - src/entrypoints/background.ts
  - src/entrypoints/popup/index.html
  - src/entrypoints/popup/App.tsx
  - src/entrypoints/options/index.html
  - src/entrypoints/options/App.tsx
  - public/icon/16.png
  - public/icon/32.png
  - public/icon/48.png
  - public/icon/96.png
  - public/icon/128.png
autonomous: true

must_haves:
  truths:
    - "Extension loads in Chrome without errors"
    - "pnpm dev starts development server with hot reload"
    - "Project has WXT framework configured"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "wxt"
    - path: "wxt.config.ts"
      provides: "WXT configuration with srcDir and path aliases"
      min_lines: 15
    - path: "src/entrypoints/background.ts"
      provides: "Service worker entrypoint"
      exports: ["default"]
    - path: "src/entrypoints/popup/App.tsx"
      provides: "Extension popup UI"
      min_lines: 10
  key_links:
    - from: "wxt.config.ts"
      to: "src/"
      via: "srcDir configuration"
      pattern: "srcDir.*src"
    - from: "package.json"
      to: "pnpm dev command"
      via: "dev script"
      pattern: "\"dev\".*wxt"
---

<objective>
Bootstrap a WXT-based Chrome extension project with React, establish the foundational project structure following AGENTS.md specifications, and verify the extension can load in Chrome developer mode.

Purpose: Create the technical foundation required for all subsequent phases. This plan establishes the build system, development server, and basic extension shell.

Output: A runnable WXT project with hot reload, basic manifest configuration, placeholder entrypoints (background, popup, options), and the hybrid folder structure defined in CONTEXT.md.
</objective>

<execution_context>
@C:/Users/kittu/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/kittu/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/PROJECT.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/ROADMAP.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/STATE.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/phases/00-foundation-setup/00-CONTEXT.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/phases/00-foundation-setup/00-RESEARCH.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/TECHSTACK.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Initialize WXT project with React template</name>
  <files>
    package.json
    wxt.config.ts
    tsconfig.json
    .gitignore
  </files>
  <action>
Run `pnpm dlx wxt@0.20.17 init` to bootstrap the project with React template. Select options:
- Template: React
- Package manager: pnpm
- TypeScript: Yes

After initialization, immediately run `pnpm install` to install all dependencies.

Then configure wxt.config.ts per RESEARCH.md Pattern 1:
- Set `srcDir: 'src'`
- Set `outDir: '.output'`
- Set `publicDir: 'public'`
- Configure manifest with name "AutoApply Copilot", permissions: ["activeTab", "storage"]
- Add Vite path aliases: `@` → `/src`, `@@` → `/`

Update .gitignore to include:
- .output/
- .wxt/
- node_modules/
- dist/
- .env
- .DS_Store

Rationale: WXT init template provides baseline configuration. Using version 0.20.17 per RESEARCH.md (latest stable). Path aliases enable clean imports per AGENTS.md code style guidelines.
  </action>
  <verify>
Run `pnpm dev` and confirm:
1. Dev server starts without errors
2. Console shows "Building extension..." message
3. .output/ directory created with manifest.json
4. Extension builds for chrome-mv3 target

Check wxt.config.ts contains `srcDir: 'src'` and path aliases.
  </verify>
  <done>
- `pnpm dev` starts successfully
- .output/chrome-mv3/manifest.json exists with correct name and permissions
- wxt.config.ts configured with srcDir, path aliases, and manifest
- package.json contains WXT, React, and pnpm scripts
  </done>
</task>

<task type="auto">
  <name>Create hybrid folder structure and placeholder entrypoints</name>
  <files>
    src/entrypoints/background.ts
    src/entrypoints/popup/index.html
    src/entrypoints/popup/App.tsx
    src/entrypoints/popup/style.css
    src/entrypoints/options/index.html
    src/entrypoints/options/App.tsx
    src/entrypoints/options/style.css
    src/components/.gitkeep
    src/hooks/.gitkeep
    src/lib/ats/workday/.gitkeep
    src/lib/ats/greenhouse/.gitkeep
    src/lib/ats/lever/.gitkeep
    src/lib/autofill/.gitkeep
    src/lib/ai/.gitkeep
    src/lib/parser/.gitkeep
    src/lib/storage/.gitkeep
    src/lib/utils/.gitkeep
    src/types/.gitkeep
    src/constants/.gitkeep
    tests/unit/.gitkeep
    tests/e2e/.gitkeep
    public/icon/16.png
    public/icon/32.png
    public/icon/48.png
    public/icon/96.png
    public/icon/128.png
  </files>
  <action>
Create the complete folder structure defined in CONTEXT.md and AGENTS.md:

**Entrypoints:**
- `src/entrypoints/background.ts` — Minimal service worker using `defineBackground()` helper (see RESEARCH.md code example)
- `src/entrypoints/popup/` — React app for extension popup (tracker quick view)
- `src/entrypoints/options/` — React app for settings/profile editor

**Library folders (Phase 2+ prep):**
- `src/lib/ats/workday/` — Workday detection, selectors, mapping
- `src/lib/ats/greenhouse/` — Greenhouse detection, selectors, mapping
- `src/lib/ats/lever/` — Lever detection, selectors, mapping
- `src/lib/autofill/` — Autofill engine
- `src/lib/ai/` — AI prompt builder
- `src/lib/parser/` — Resume parsing
- `src/lib/storage/` — Chrome Storage + encryption
- `src/lib/utils/` — Shared utilities

**Component folders:**
- `src/components/` — Shared React components
- `src/hooks/` — Custom React hooks

**Other:**
- `src/types/` — Shared TypeScript types
- `src/constants/` — ATS patterns, field selectors
- `tests/unit/` — Vitest unit tests (mirrors src/)
- `tests/e2e/` — Playwright E2E tests

For placeholder icons in public/icon/, create simple colored squares (16x16, 32x32, 48x48, 96x96, 128x128) or use WXT default icons if generated by init command.

Use .gitkeep files for empty folders to preserve structure in git.

Background service worker content:
```typescript
export default defineBackground(() => {
  console.log('AutoApply Copilot background service worker started');
  
  browser.runtime.onInstalled.addListener(() => {
    console.log('Extension installed');
  });
});
```

Popup App.tsx (minimal placeholder):
```typescript
import React from 'react';
import './style.css';

function App() {
  return (
    <div className="w-80 h-96 p-4">
      <h1 className="text-xl font-bold">AutoApply Copilot</h1>
      <p className="text-sm text-gray-600 mt-2">Phase 0: Foundation Complete</p>
    </div>
  );
}

export default App;
```

Options App.tsx (minimal placeholder):
```typescript
import React from 'react';
import './style.css';

function App() {
  return (
    <div className="container mx-auto p-8">
      <h1 className="text-2xl font-bold">Settings</h1>
      <p className="text-gray-600 mt-2">Configuration options will appear here</p>
    </div>
  );
}

export default App;
```

Rationale: Establishing the full folder structure now prevents restructuring later. ATS folders (workday/greenhouse/lever) are explicitly required by CONTEXT.md user decision. Using .gitkeep ensures empty directories are tracked.
  </action>
  <verify>
Confirm folder structure exists:
```bash
ls src/lib/ats/
# Should show: workday/ greenhouse/ lever/

ls src/entrypoints/
# Should show: background.ts popup/ options/

ls tests/
# Should show: unit/ e2e/
```

Run `pnpm dev` and verify:
1. No errors about missing entrypoints
2. .output/chrome-mv3/manifest.json includes background, popup, and options entries
3. Extension popup and options pages are accessible
  </verify>
  <done>
- Complete folder structure matches AGENTS.md specification
- All ATS folders (workday, greenhouse, lever) exist in src/lib/ats/
- Background, popup, and options entrypoints created and functional
- Tests directories (unit/, e2e/) exist
- `pnpm dev` builds without errors
- Extension manifest includes all three entrypoints
  </done>
</task>

<task type="auto">
  <name>Add postinstall script and verify hot reload</name>
  <files>
    package.json
  </files>
  <action>
Add `"postinstall": "wxt prepare"` to package.json scripts section per RESEARCH.md Pitfall 3 mitigation.

This ensures TypeScript path aliases are generated in .wxt/tsconfig.json after every `pnpm install`, preventing import resolution errors in IDEs.

Then test hot reload functionality:
1. Start dev server: `pnpm dev`
2. Load extension in Chrome (chrome://extensions, Load unpacked, select .output/chrome-mv3)
3. Make a visible change to popup App.tsx (change heading text)
4. Verify browser auto-reloads extension without manual refresh

Rationale: User decision requires "full hot reload — changes immediately reflected without manual reload". The postinstall script prevents common TypeScript path resolution issues documented in RESEARCH.md.
  </action>
  <verify>
Check package.json contains:
```json
"scripts": {
  "dev": "wxt",
  "postinstall": "wxt prepare",
  ...
}
```

Test hot reload:
1. Run `pnpm dev`
2. Load extension in Chrome
3. Edit popup/App.tsx heading text
4. Confirm popup updates automatically without manual reload
  </verify>
  <done>
- postinstall script added to package.json
- `wxt prepare` runs after pnpm install
- Hot reload verified working for popup changes
- TypeScript path aliases (@/) resolve correctly in IDE
  </done>
</task>

</tasks>

<verification>
**Phase 0 Goal:** Fully configured, runnable Chrome extension shell

**Verification Steps:**
1. Run `pnpm dev` → dev server starts, builds extension for chrome-mv3
2. Load extension in Chrome (chrome://extensions → Load unpacked → .output/chrome-mv3)
3. Confirm extension appears in toolbar with icon
4. Click extension icon → popup opens showing "AutoApply Copilot" heading
5. Right-click extension → Options → settings page opens
6. Check Chrome DevTools console → no errors, background worker logs "started" message
7. Edit popup/App.tsx, save → extension auto-reloads in <5 seconds
8. Verify folder structure: `ls src/lib/ats/` shows workday, greenhouse, lever directories

**Success Criteria:**
- Extension loads without errors in Chrome
- `pnpm dev` command functional with hot reload
- All AGENTS.md folder structure present
- Background, popup, options entrypoints working
- No TypeScript errors, no console errors
</verification>

<success_criteria>
**Measurable Completion:**
1. ✅ Extension installs in Chrome developer mode without errors
2. ✅ `pnpm dev` starts development server in <10 seconds
3. ✅ Hot reload updates extension within 5 seconds of file save
4. ✅ All 13 required folders exist (ats platforms, lib modules, tests, components, hooks)
5. ✅ TypeScript strict mode enabled (verified in tsconfig.json)
6. ✅ Path aliases (@/) functional in IDE and build
7. ✅ WXT manifest generates with correct permissions: activeTab, storage
8. ✅ Background service worker logs to console on extension load
9. ✅ Popup and options pages render React components without errors
10. ✅ Zero TypeScript compilation errors in terminal

**Phase 0 Definition of Done alignment:**
- ✅ Extension loads in Chrome without errors (Task 2)
- ✅ `pnpm dev` starts development server with hot reload (Task 1, Task 3)
- ✅ WXT framework configured (Task 1)
- ✅ Basic manifest.json created (Task 1)
- ESLint/Prettier → Plan 02
- TypeScript strict mode configuration → Plan 02
- Git atomic commits → All plans
</success_criteria>

<output>
After completion, create `.planning/phases/00-foundation-setup/00-01-SUMMARY.md` documenting:
- WXT version used (0.20.17)
- Folder structure created (list all directories)
- Entrypoints implemented (background, popup, options)
- Path aliases configured (@/ and @@/)
- Hot reload verification results
- Any deviations from plan or issues encountered
- Files created (full list)
</output>
