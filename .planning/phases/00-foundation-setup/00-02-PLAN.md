---
phase: 00-foundation-setup
plan: 02
type: execute
wave: 2
depends_on: ["00-01"]
files_modified:
  - tsconfig.json
  - .eslintrc.cjs
  - .prettierrc.json
  - .prettierignore
  - package.json
  - .vscode/settings.json
autonomous: true

must_haves:
  truths:
    - "TypeScript strict mode catches all type errors"
    - "ESLint runs on every save and catches errors"
    - "Prettier auto-formats code on save"
  artifacts:
    - path: "tsconfig.json"
      provides: "TypeScript strict mode configuration"
      contains: "\"strict\": true"
    - path: ".eslintrc.cjs"
      provides: "ESLint configuration for TypeScript + React"
      min_lines: 20
    - path: ".prettierrc.json"
      provides: "Prettier code formatting rules"
      min_lines: 5
  key_links:
    - from: "tsconfig.json"
      to: ".wxt/tsconfig.json"
      via: "extends"
      pattern: "extends.*\\.wxt"
    - from: ".eslintrc.cjs"
      to: "tsconfig.json"
      via: "parserOptions.project"
      pattern: "project.*tsconfig"
---

<objective>
Configure strict TypeScript checking, ESLint for code quality, and Prettier for consistent formatting. Establish code quality gates that enforce AGENTS.md style guidelines on every save.

Purpose: Implement user's locked decision for "strict checking mode — TypeScript + ESLint run on every save, catching errors immediately (slower but safer)". This ensures type safety and code quality from the start.

Output: Fully configured TypeScript strict mode with all safety flags enabled, ESLint integrated with TypeScript parser, Prettier configured for auto-format, and VS Code settings for on-save enforcement.
</objective>

<execution_context>
@C:/Users/kittu/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/kittu/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/PROJECT.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/ROADMAP.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/phases/00-foundation-setup/00-CONTEXT.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/.planning/phases/00-foundation-setup/00-RESEARCH.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/TECHSTACK.md
@C:/Users/kittu/Downloads/GIT/AutoApplyBot/AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Configure TypeScript strict mode with all safety flags</name>
  <files>
    tsconfig.json
  </files>
  <action>
Extend the existing tsconfig.json (which extends .wxt/tsconfig.json) to enable full strict mode per RESEARCH.md Pattern 1 and AGENTS.md TypeScript guidelines.

Update tsconfig.json compilerOptions to include all strict flags:

```json
{
  "extends": "./.wxt/tsconfig.json",
  "compilerOptions": {
    // Strict mode (comprehensive)
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "strictBindCallApply": true,
    "strictPropertyInitialization": true,
    "noImplicitThis": true,
    "alwaysStrict": true,
    
    // Additional safety
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    
    // Import resolution (already in .wxt config, but explicit here)
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  }
}
```

Rationale: User locked decision requires "strict checking mode" for safety. Per AGENTS.md: "No `any` types. Use `unknown` and type guards if the type is truly dynamic." These flags enforce that requirement at compile time.
  </action>
  <verify>
Run `pnpm type-check` (which runs `tsc --noEmit`).

Confirm TypeScript compiles without errors. If there are any errors in generated WXT files or placeholder code from Plan 01, fix them:
- Add explicit types to all function parameters
- Replace any implicit `any` types with proper types
- Add return type annotations to exported functions

Check tsconfig.json contains all strict flags listed above.
  </verify>
  <done>
- tsconfig.json extends .wxt/tsconfig.json
- All strict mode flags enabled (strict: true + all individual flags)
- `pnpm type-check` passes with zero errors
- No implicit `any` types in existing code
  </done>
</task>

<task type="auto">
  <name>Install and configure ESLint with TypeScript + React support</name>
  <files>
    .eslintrc.cjs
    package.json
  </files>
  <action>
Install ESLint and required plugins:

```bash
pnpm add -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-react eslint-plugin-react-hooks eslint-config-prettier
```

Create .eslintrc.cjs in project root:

```javascript
module.exports = {
  root: true,
  env: {
    browser: true,
    es2021: true,
    node: true,
    webextensions: true,
  },
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:@typescript-eslint/recommended-requiring-type-checking',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
    'prettier', // Disables ESLint rules that conflict with Prettier
  ],
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaVersion: 'latest',
    sourceType: 'module',
    project: './tsconfig.json',
    ecmaFeatures: {
      jsx: true,
    },
  },
  plugins: ['@typescript-eslint', 'react', 'react-hooks'],
  rules: {
    // Enforce AGENTS.md guidelines
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/explicit-function-return-type': ['warn', {
      allowExpressions: true,
      allowTypedFunctionExpressions: true,
    }],
    '@typescript-eslint/no-unused-vars': ['error', {
      argsIgnorePattern: '^_',
      varsIgnorePattern: '^_',
    }],
    '@typescript-eslint/consistent-type-imports': 'warn',
    
    // React rules
    'react/react-in-jsx-scope': 'off', // Not needed in React 18+
    'react/prop-types': 'off', // Using TypeScript instead
    
    // General code quality
    'no-console': 'warn',
    'prefer-const': 'error',
  },
  settings: {
    react: {
      version: 'detect',
    },
  },
};
```

Add lint scripts to package.json:

```json
"scripts": {
  "lint": "eslint . --ext .ts,.tsx",
  "lint:fix": "eslint . --ext .ts,.tsx --fix"
}
```

Rationale: User decision requires "TypeScript + ESLint run on every save". Using `@typescript-eslint/recommended-requiring-type-checking` enables type-aware rules that catch errors beyond basic syntax. `eslint-config-prettier` prevents conflicts between ESLint and Prettier (both tools serve different purposes).
  </action>
  <verify>
Run `pnpm lint` and confirm:
1. ESLint scans all .ts and .tsx files
2. No errors reported (warnings acceptable if they're about console.log in placeholder code)
3. If errors exist, run `pnpm lint:fix` to auto-fix, then manually fix remaining issues

Test type-aware rules by temporarily adding `const x: any = 5;` to a file → should error with "no-explicit-any"
  </verify>
  <done>
- ESLint installed with TypeScript + React plugins
- .eslintrc.cjs configured with strict rules matching AGENTS.md
- `pnpm lint` passes (or only warnings remain)
- Type-aware linting functional (tested with `any` type)
- lint and lint:fix scripts in package.json
  </done>
</task>

<task type="auto">
  <name>Configure Prettier and VS Code auto-format on save</name>
  <files>
    .prettierrc.json
    .prettierignore
    package.json
    .vscode/settings.json
  </files>
  <action>
Install Prettier:

```bash
pnpm add -D prettier
```

Create .prettierrc.json in project root:

```json
{
  "semi": true,
  "singleQuote": true,
  "trailingComma": "es5",
  "tabWidth": 2,
  "printWidth": 100,
  "endOfLine": "lf",
  "arrowParens": "always"
}
```

Create .prettierignore:

```
.output
.wxt
node_modules
dist
build
coverage
*.md
package-lock.json
pnpm-lock.yaml
```

Add format scripts to package.json:

```json
"scripts": {
  "format": "prettier --write \"src/**/*.{ts,tsx,js,jsx,json,css}\"",
  "format:check": "prettier --check \"src/**/*.{ts,tsx,js,jsx,json,css}\""
}
```

Create .vscode/settings.json to enable auto-format on save:

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "typescript.tsdk": "node_modules/typescript/lib",
  "typescript.enablePromptUseWorkspaceTsdk": true
}
```

Rationale: User decision is "auto-format on save recommended". VS Code settings enforce this without requiring husky/lint-staged (per RESEARCH.md Open Question 3 recommendation: no pre-commit hooks in Phase 0). Prettier handles formatting, ESLint handles logic/quality.
  </action>
  <verify>
Run `pnpm format` to format all existing files, then run `pnpm format:check` → should report "All matched files use Prettier code style!"

Test auto-format in VS Code:
1. Open popup/App.tsx
2. Add intentional formatting issue (extra spaces, wrong quotes)
3. Save file (Ctrl+S / Cmd+S)
4. Confirm Prettier auto-formats the file

Run `pnpm lint` after formatting → should pass (Prettier and ESLint should not conflict)
  </verify>
  <done>
- Prettier installed and configured
- .prettierrc.json with project style rules
- .prettierignore excludes generated files
- format and format:check scripts in package.json
- .vscode/settings.json enables auto-format on save
- Manual test confirms auto-format works in VS Code
- No conflicts between Prettier and ESLint
  </done>
</task>

</tasks>

<verification>
**Plan 02 Goal:** Strict TypeScript + ESLint + Prettier configured

**Verification Steps:**
1. Run `pnpm type-check` → zero TypeScript errors
2. Run `pnpm lint` → zero errors (warnings acceptable for console.log)
3. Run `pnpm format:check` → all files formatted correctly
4. Open any .tsx file in VS Code, make formatting mistakes, save → auto-formats
5. Open any .ts file, add `const x: any = 5;` → ESLint underlines with error
6. Check tsconfig.json → strict: true and all safety flags present
7. Run `pnpm dev` → dev server still works with new configs

**Success Criteria:**
- TypeScript strict mode catches all type errors
- ESLint catches code quality issues on save
- Prettier auto-formats code on save (in VS Code)
- Zero conflicts between TypeScript, ESLint, and Prettier
</verification>

<success_criteria>
**Measurable Completion:**
1. ✅ tsconfig.json has strict: true + all individual strict flags
2. ✅ `pnpm type-check` passes with zero errors
3. ✅ .eslintrc.cjs configured with TypeScript + React rules
4. ✅ `pnpm lint` command functional, zero errors on existing code
5. ✅ .prettierrc.json configured with project style rules
6. ✅ `pnpm format` successfully formats all files
7. ✅ VS Code auto-formats on save (verified manually)
8. ✅ No `any` types in codebase (enforced by ESLint)
9. ✅ All commands from AGENTS.md work (type-check, lint, lint:fix, format, format:check)
10. ✅ Dev server (`pnpm dev`) still functional after configuration changes

**Phase 0 Definition of Done alignment:**
- ✅ TypeScript strict mode passes (Task 1)
- ✅ ESLint configured and passing (Task 2)
- ✅ Prettier configured (Task 3)
</success_criteria>

<output>
After completion, create `.planning/phases/00-foundation-setup/00-02-SUMMARY.md` documenting:
- TypeScript strict flags enabled (full list)
- ESLint plugins installed and rules configured
- Prettier style rules chosen (printWidth, singleQuote, etc.)
- VS Code settings created for auto-format
- Any linting errors found and fixed
- Verification test results
- Files modified
</output>
